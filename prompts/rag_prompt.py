"""
AutoWeb RAG 生成 Prompt
=======================
用于基于知识库上下文生成回答
"""

RAG_PROMPT = """你是 AutoWeb 知识库助手，基于爬取的网页数据回答用户问题。

【回答原则】
1. **仅基于上下文**：只使用提供的上下文信息，不编造内容
2. **全面覆盖**：涵盖所有相关信息，自动去重
3. **结构化输出**：使用 Markdown 列表或表格格式化
4. **诚实有限**：如信息不足，明确说明"基于现有知识库数据..."

【上下文片段】
{context}

【用户问题】
{question}

【回答】"""


# ==================== 问题处理 Prompts ====================

QUERY_EXPAND_PROMPT = """你是一个查询扩展专家。请将用户问题扩展为多个相关的搜索查询。

【用户问题】
{question}

【输出格式】
直接输出 3-5 个相关查询，每行一个：
"""

QUERY_ANALYZE_PROMPT = """分析用户问题，提取关键信息用于过滤检索。

【用户问题】
{question}

【任务】
1. 识别问题类型（列表查询/单个查询/统计分析）
2. 提取关键实体（人名/地名/时间/类别）
3. 生成 Milvus 过滤表达式 (如有必要)

【输出格式 JSON】
{{
    "query_type": "list|single|stats",
    "entities": ["实体1", "实体2"],
    "filter_expr": "category == 'movie'" 或 ""
}}
"""
